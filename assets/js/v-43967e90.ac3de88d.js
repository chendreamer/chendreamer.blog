"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[3772],{6609:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-43967e90",path:"/server/Create%20React%20App.html",title:"Create React App开发到部署",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装Create React App",slug:"安装create-react-app",children:[]},{level:2,title:"craco",slug:"craco",children:[]},{level:2,title:"nginx",slug:"nginx",children:[]},{level:2,title:"server",slug:"server",children:[]},{level:2,title:"验证",slug:"验证",children:[]}],filePathRelative:"server/Create React App.md",git:{updatedTime:16693732e5,contributors:[]}}},314:(n,s,a)=>{a.r(s),a.d(s,{default:()=>e});const p=(0,a(6252).uE)('<h1 id="create-react-app开发到部署" tabindex="-1"><a class="header-anchor" href="#create-react-app开发到部署" aria-hidden="true">#</a> Create React App开发到部署</h1><h2 id="安装create-react-app" tabindex="-1"><a class="header-anchor" href="#安装create-react-app" aria-hidden="true">#</a> 安装Create React App</h2><p>安装 <code>npx create-react-app my-app</code></p><h2 id="craco" tabindex="-1"><a class="header-anchor" href="#craco" aria-hidden="true">#</a> craco</h2><p>用来修改CRA的webpack等配置。<br><a href="https://github.com/gsoft-inc/craco" target="_blank">官方说明</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//配置跨域</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n            port<span class="token operator">:</span> <span class="token number">8008</span><span class="token punctuation">,</span>\n            open<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>\n            proxy<span class="token operator">:</span><span class="token punctuation">{</span>\n                <span class="token string">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n                    target<span class="token operator">:</span> <span class="token string">&#39;http://127.0.0.1:8888&#39;</span><span class="token punctuation">,</span>\n                    changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h2><p>最好用cmd执行命令，不会有Powershell报错。</p><ul><li>查看nginx的版本号：nginx -v</li><li>启动nginx：start nginx</li><li>快速停止或关闭nginx：nginx -s stop</li><li>正常停止或关闭nginx：nginx -s quit</li><li>配置文件nginx.conf修改重装载命令：nginx -s reload</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//修改真实地址 ,功能和webpack的proxy一样</span>\nlocation <span class="token operator">~</span> <span class="token operator">/</span>api <span class="token punctuation">{</span>\n            proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8888</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="server" tabindex="-1"><a class="header-anchor" href="#server" aria-hidden="true">#</a> server</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> tableData <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span>\n        key<span class="token operator">:</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span>\n        name<span class="token operator">:</span> <span class="token string">&#39;John Brown&#39;</span><span class="token punctuation">,</span>\n        age<span class="token operator">:</span> <span class="token number">3288</span><span class="token punctuation">,</span>\n        address<span class="token operator">:</span> <span class="token string">&#39;New York No. 1 Lake Park&#39;</span><span class="token punctuation">,</span>\n        tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;nice&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;developer&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n        key<span class="token operator">:</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span>\n        name<span class="token operator">:</span> <span class="token string">&#39;Jim Green&#39;</span><span class="token punctuation">,</span>\n        age<span class="token operator">:</span> <span class="token number">4288</span><span class="token punctuation">,</span>\n        address<span class="token operator">:</span> <span class="token string">&#39;London No. 1 Lake Park&#39;</span><span class="token punctuation">,</span>\n        tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;loser&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span>\n        key<span class="token operator">:</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span>\n        name<span class="token operator">:</span> <span class="token string">&#39;Joe Black&#39;</span><span class="token punctuation">,</span>\n        age<span class="token operator">:</span> <span class="token number">3288</span><span class="token punctuation">,</span>\n        address<span class="token operator">:</span> <span class="token string">&#39;Sidney No. 1 Lake Park&#39;</span><span class="token punctuation">,</span>\n        tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;cool&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;teacher&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function">onRequest</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> pathname <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Request for &quot;</span> <span class="token operator">+</span> pathname <span class="token operator">+</span> <span class="token string">&quot; received.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n    <span class="token comment">//response.writeHead(200, {&quot;Content-Type&quot;: &quot;text/plain&quot;});</span>\n    <span class="token comment">//response.write(&quot;Hello World&quot;);</span>\n    <span class="token comment">//设置允许跨域的域名，*代表允许任意域名跨域</span>\n    <span class="token comment">//response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);</span>\n\n    response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>tableData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>onRequest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Server listen port 8888.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nexports<span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="验证" tabindex="-1"><a class="header-anchor" href="#验证" aria-hidden="true">#</a> 验证</h2><p>页面放到nginx下的html下。直接访问即可。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> server <span class="token punctuation">{</span>\n        listen       <span class="token number">9999</span><span class="token punctuation">;</span>\n        server_name  localhost<span class="token punctuation">;</span>\n\n         #允许跨域请求的域，<span class="token operator">*</span> 代表所有\n        add_header <span class="token string">&#39;Access-Control-Allow-Origin&#39;</span> <span class="token operator">*</span><span class="token punctuation">;</span>\n        #允许带上cookie请求\n        add_header <span class="token string">&#39;Access-Control-Allow-Credentials&#39;</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">;</span>\n        #允许请求的方法，比如 <span class="token constant">GET</span><span class="token operator">/</span><span class="token constant">POST</span><span class="token operator">/</span><span class="token constant">PUT</span><span class="token operator">/</span><span class="token constant">DELETE</span>\n        add_header <span class="token string">&#39;Access-Control-Allow-Methods&#39;</span> <span class="token operator">*</span><span class="token punctuation">;</span>\n        #允许请求的header\n        add_header <span class="token string">&#39;Access-Control-Allow-Headers&#39;</span> <span class="token operator">*</span><span class="token punctuation">;</span>\n        \n        location <span class="token operator">/</span> <span class="token punctuation">{</span>\n                root   html<span class="token operator">/</span>wms<span class="token punctuation">;</span>\n                index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div>',15),e={render:function(n,s){return p}}}}]);